(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["declaration"],{"18d6":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"landing landing-container staff",class:{passed:!0===t.status,failed:!1===t.status,nofill:null===t.status}},[n("h1",[t._v("STAFF Client")]),n("Scanner"),n("div",{staticClass:"landing status-icon",class:{passed:!0===t.status,failed:!1===t.status,nofill:null===t.status}},[!0===t.status?n("font-awesome-icon",{attrs:{icon:["fas","check"]}}):!1===t.status?n("font-awesome-icon",{attrs:{icon:["fas","times"]}}):null===t.status?n("font-awesome-icon",{attrs:{icon:["fas","exclamation-triangle"]}}):t._e()],1),n("h1",[t._v("STAFF Client")])],1)},s=[],a=n("9ab4"),c=n("60a3"),r=n("4bb5"),i=n("8436"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.status="",e}return Object(a["d"])(e,t),e.prototype.onTokenChange=function(t){return Object(a["b"])(this,void 0,void 0,(function(){var e;return Object(a["e"])(this,(function(n){switch(n.label){case 0:return t?(this.status="",[4,this.verifyToken({endpoint:this.endpoint,token:t})]):[3,2];case 1:e=n.sent(),e.fill?e.status?(this.status=!0,this.resetScanner()):(this.status=!1,this.resetScanner()):(this.status=null,this.resetScanner()),n.label=2;case 2:return[2]}}))}))},e.prototype.resetScanner=function(){var t=this;setTimeout((function(){t.status="",t.resetToken()}),1e3)},Object(a["c"])([Object(r["a"])("verifyToken",{namespace:"form"})],e.prototype,"verifyToken",void 0),Object(a["c"])([Object(r["a"])("resetToken",{namespace:"form"})],e.prototype,"resetToken",void 0),Object(a["c"])([Object(r["b"])("endpoint",{namespace:"app"})],e.prototype,"endpoint",void 0),Object(a["c"])([Object(r["b"])("token",{namespace:"form"})],e.prototype,"token",void 0),Object(a["c"])([Object(c["c"])("token")],e.prototype,"onTokenChange",null),e=Object(a["c"])([Object(c["a"])({components:{Scanner:i["a"]}})],e),e}(c["b"]),l=u,p=l,d=n("2877"),b=Object(d["a"])(p,o,s,!1,null,null,null);e["default"]=b.exports},8436:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scanner-container"},[n("div",{staticClass:"scanner"},[n("qrcode-stream",{on:{decode:t.onDecode}})],1)])},s=[],a=n("9ab4"),c=n("60a3"),r=n("4bb5"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["d"])(e,t),e.prototype.onDecode=function(t){t&&"string"===typeof t&&this.setToken(t)},Object(a["c"])([Object(r["a"])("setToken",{namespace:"form"})],e.prototype,"setToken",void 0),e=Object(a["c"])([c["a"]],e),e}(c["b"]),u=i,l=u,p=n("2877"),d=Object(p["a"])(l,o,s,!1,null,null,null);e["a"]=d.exports},b9d4:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article article-container"},[n("article",{staticClass:"article",domProps:{innerHTML:t._s(t.content)}}),n("div",{staticClass:"button",on:{click:function(e){return t.checkData()}}},[n("span",[t._v("下一步｜Next")]),n("font-awesome-icon",{attrs:{icon:["fas","arrow-right"]}})],1)])},s=[],a=n("9ab4"),c=n("60a3"),r=n("4bb5"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["d"])(e,t),e.prototype.checkData=function(){return Object(a["b"])(this,void 0,Promise,(function(){var t,e;return Object(a["e"])(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),document.querySelectorAll(".markdown-todo").forEach((function(t){if(!t.checked)throw new Error("你必須勾選全部項目並同意此健康聲明後才能進入會場。\nYou must check all items and agree to this health declaration before entering the venue.")})),this.toggleLoading(!0),this.token?[4,this.sendForm({endpoint:this.endpoint,data:Object(a["a"])({token:this.token,status:!0},this.formData)})]:[3,2];case 1:return n.sent(),this.setToken(this.token),[3,4];case 2:return[4,this.sendForm({endpoint:this.endpoint,data:Object(a["a"])({status:!0},this.formData)})];case 3:t=n.sent(),this.setToken(t.id),n.label=4;case 4:return this.toggleLoading(!1),this.$router.push({name:"Status"}),[3,6];case 5:return e=n.sent(),window.alert(e.message),[3,6];case 6:return[2]}}))}))},Object(a["c"])([Object(r["a"])("setToken",{namespace:"form"})],e.prototype,"setToken",void 0),Object(a["c"])([Object(r["a"])("sendForm",{namespace:"form"})],e.prototype,"sendForm",void 0),Object(a["c"])([Object(r["a"])("toggleLoading",{namespace:"app"})],e.prototype,"toggleLoading",void 0),Object(a["c"])([Object(r["b"])("endpoint",{namespace:"app"})],e.prototype,"endpoint",void 0),Object(a["c"])([Object(r["b"])("content",{namespace:"declaration"})],e.prototype,"content",void 0),Object(a["c"])([Object(r["b"])("token",{namespace:"form"})],e.prototype,"token",void 0),Object(a["c"])([Object(r["b"])("data",{namespace:"form"})],e.prototype,"formData",void 0),Object(a["c"])([Object(r["b"])("loading",{namespace:"app"})],e.prototype,"loading",void 0),e=Object(a["c"])([c["a"]],e),e}(c["b"]),u=i,l=u,p=n("2877"),d=Object(p["a"])(l,o,s,!1,null,null,null);e["default"]=d.exports},bede:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$route.query.rtoken?t._e():n("div",{staticClass:"landing landing-container",class:{passed:!0===t.status,failed:!1===t.status}},[t._m(0),n("Scanner"),null!==t.status?n("div",{staticClass:"landing status-icon",class:{passed:!0===t.status,failed:!1===t.status}},[t.status?n("font-awesome-icon",{attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1):t._e(),t._m(1),n("p",{on:{click:function(e){return t.$router.push({name:"Fill"})}}},[t._v(" 我沒有 QR Code"),n("br"),t._v("I don't have QR Code ")])],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[t._v("掃描 QR Code"),n("br"),t._v("以開始填寫健康聲明書")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[t._v("Scan QR Code"),n("br"),t._v("to start filling the Health Declaration")])}],a=n("9ab4"),c=n("60a3"),r=n("4bb5"),i=n("8436"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.status=null,e}return Object(a["d"])(e,t),e.prototype.onTokenChange=function(t){return Object(a["b"])(this,void 0,void 0,(function(){var e;return Object(a["e"])(this,(function(n){switch(n.label){case 0:return t?(this.status=null,[4,this.verifyToken({endpoint:this.endpoint,token:t})]):[3,2];case 1:e=n.sent(),e.fill?this.$router.push({name:"Status"}):this.$router.push({name:"Fill"}),n.label=2;case 2:return[2]}}))}))},e.prototype.mounted=function(){this.detectRouterToken()},e.prototype.resetScanner=function(){var t=this;setTimeout((function(){t.status=null,t.resetToken()}),2e3)},e.prototype.detectRouterToken=function(){this.$route.query&&this.$route.query.rtoken&&(this.toggleAppMode(!0),this.setToken(this.$route.query.rtoken))},Object(a["c"])([Object(r["a"])("setToken",{namespace:"form"})],e.prototype,"setToken",void 0),Object(a["c"])([Object(r["a"])("verifyToken",{namespace:"form"})],e.prototype,"verifyToken",void 0),Object(a["c"])([Object(r["a"])("resetToken",{namespace:"form"})],e.prototype,"resetToken",void 0),Object(a["c"])([Object(r["a"])("toggleAppMode",{namespace:"app"})],e.prototype,"toggleAppMode",void 0),Object(a["c"])([Object(r["b"])("endpoint",{namespace:"app"})],e.prototype,"endpoint",void 0),Object(a["c"])([Object(r["b"])("token",{namespace:"form"})],e.prototype,"token",void 0),Object(a["c"])([Object(c["c"])("token")],e.prototype,"onTokenChange",null),e=Object(a["c"])([Object(c["a"])({components:{Scanner:i["a"]}})],e),e}(c["b"]),l=u,p=l,d=n("2877"),b=Object(d["a"])(p,o,s,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=declaration.53d5c413.js.map