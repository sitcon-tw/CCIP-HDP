{"version":3,"sources":["webpack:///./src/views/Staff.vue?f83d","webpack:///./src/views/Staff.vue","webpack:///./src/views/Staff.vue?8355","webpack:///./src/views/Staff.vue?413c","webpack:///./src/components/Scanner.vue?3b88","webpack:///./src/components/Scanner.vue","webpack:///./src/components/Scanner.vue?c888","webpack:///./src/components/Scanner.vue?ea55","webpack:///./src/views/Declaration.vue?1480","webpack:///./src/views/Declaration.vue","webpack:///./src/views/Declaration.vue?6a10","webpack:///./src/views/Declaration.vue?6bf9","webpack:///./src/views/Landing.vue?7182","webpack:///./src/views/Landing.vue","webpack:///./src/views/Landing.vue?badd","webpack:///./src/views/Landing.vue?f921"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","passed","status","failed","nofill","_v","attrs","_e","staticRenderFns","onTokenChange","token","verifyToken","endpoint","res","fill","resetScanner","setTimeout","resetToken","namespace","Landing","components","Scanner","component","on","onDecode","decoded","setToken","domProps","_s","content","$event","checkData","Promise","document","querySelectorAll","forEach","checkbox","checked","Error","toggleLoading","sendForm","data","formData","id","$router","push","name","window","alert","message","Declaration","$route","query","rtoken","_m","mounted","detectRouterToken","toggleAppMode"],"mappings":"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","file":"js/declaration.53d5c413.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"landing landing-container staff\",class:{\n    passed: _vm.status === true,\n    failed: _vm.status === false,\n    nofill: _vm.status === null\n  }},[_c('h1',[_vm._v(\"STAFF Client\")]),_c('Scanner'),_c('div',{staticClass:\"landing status-icon\",class:{\n      passed: _vm.status === true,\n      failed: _vm.status === false,\n      nofill: _vm.status === null\n    }},[(_vm.status === true)?_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'check']}}):(_vm.status === false)?_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'times']}}):(_vm.status === null)?_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'exclamation-triangle']}}):_vm._e()],1),_c('h1',[_vm._v(\"STAFF Client\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Watch, Vue } from \"vue-property-decorator\";\nimport { Action, Getter } from \"vuex-class\";\n\nimport { AppState } from \"@/store/types/app.type\";\nimport { FormState, FormResponse } from \"@/store/types/form.type\";\n\nimport Scanner from \"@/components/Scanner.vue\";\n\n@Component({\n  components: {\n    Scanner\n  }\n})\nexport default class Landing extends Vue {\n  @Action(\"verifyToken\", { namespace: \"form\" })\n  private verifyToken!: (args: {\n    endpoint: AppState[\"endpoint\"];\n    token: FormState[\"token\"];\n  }) => Promise<FormResponse>;\n\n  @Action(\"resetToken\", { namespace: \"form\" })\n  private resetToken!: () => void;\n\n  @Getter(\"endpoint\", { namespace: \"app\" })\n  private endpoint!: string;\n\n  @Getter(\"token\", { namespace: \"form\" })\n  private token!: string;\n\n  @Watch(\"token\")\n  private async onTokenChange(token: string) {\n    if (token) {\n      this.status = \"\";\n\n      const res = (await this.verifyToken({\n        endpoint: this.endpoint,\n        token: token\n      })) as { fill: string; status: string };\n\n      if (!res.fill) {\n        this.status = null;\n        this.resetScanner();\n      } else if (res.status) {\n        this.status = true;\n        this.resetScanner();\n      } else {\n        this.status = false;\n        this.resetScanner();\n      }\n    }\n  }\n\n  private status: boolean | null | string = \"\";\n\n  private resetScanner(): void {\n    setTimeout(() => {\n      this.status = \"\";\n      this.resetToken();\n    }, 1000);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Staff.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Staff.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Staff.vue?vue&type=template&id=33aacd3a&\"\nimport script from \"./Staff.vue?vue&type=script&lang=ts&\"\nexport * from \"./Staff.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scanner-container\"},[_c('div',{staticClass:\"scanner\"},[_c('qrcode-stream',{on:{\"decode\":_vm.onDecode}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { Action } from \"vuex-class\";\n\nimport { FormState } from \"@/store/types/form.type\";\n\n@Component\nexport default class Scanner extends Vue {\n  @Action(\"setToken\", { namespace: \"form\" })\n  private setToken!: (token: FormState[\"token\"]) => void;\n\n  private onDecode(decoded: string): void {\n    if (decoded && typeof decoded === \"string\") {\n      this.setToken(decoded);\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Scanner.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Scanner.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Scanner.vue?vue&type=template&id=6c01e827&\"\nimport script from \"./Scanner.vue?vue&type=script&lang=ts&\"\nexport * from \"./Scanner.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article article-container\"},[_c('article',{staticClass:\"article\",domProps:{\"innerHTML\":_vm._s(_vm.content)}}),_c('div',{staticClass:\"button\",on:{\"click\":function($event){return _vm.checkData()}}},[_c('span',[_vm._v(\"下一步｜Next\")]),_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'arrow-right']}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { Action, Getter } from \"vuex-class\";\n\nimport { AppState } from \"@/store/types/app.type\";\nimport { FormState, FormPayload, FormResponse } from \"@/store/types/form.type\";\n\n@Component\nexport default class Declaration extends Vue {\n  @Action(\"setToken\", { namespace: \"form\" })\n  private setToken!: (token: FormState[\"token\"]) => void;\n\n  @Action(\"sendForm\", { namespace: \"form\" })\n  private sendForm!: (args: {\n    endpoint: AppState[\"endpoint\"];\n    data: FormPayload;\n  }) => Promise<FormResponse>;\n\n  @Action(\"toggleLoading\", { namespace: \"app\" })\n  private toggleLoading!: (state: AppState[\"loading\"]) => void;\n\n  @Getter(\"endpoint\", { namespace: \"app\" })\n  private endpoint!: string;\n\n  @Getter(\"content\", { namespace: \"declaration\" })\n  private content!: string;\n\n  @Getter(\"token\", { namespace: \"form\" })\n  private token!: FormState[\"token\"];\n\n  @Getter(\"data\", { namespace: \"form\" })\n  private formData!: FormState[\"data\"];\n\n  @Getter(\"loading\", { namespace: \"app\" })\n  private loading!: boolean;\n\n  private async checkData(): Promise<void> {\n    try {\n      (document.querySelectorAll(\".markdown-todo\") as NodeListOf<\n        HTMLInputElement\n      >).forEach(checkbox => {\n        if (!checkbox.checked) {\n          throw new Error(\n            \"你必須勾選全部項目並同意此健康聲明後才能進入會場。\\nYou must check all items and agree to this health declaration before entering the venue.\"\n          );\n        }\n      });\n\n      this.toggleLoading(true);\n\n      if (this.token) {\n        await this.sendForm({\n          endpoint: this.endpoint,\n          data: {\n            token: this.token,\n            status: true,\n            ...this.formData\n          }\n        });\n\n        this.setToken(this.token);\n      } else {\n        const res = await this.sendForm({\n          endpoint: this.endpoint,\n          data: {\n            status: true,\n            ...this.formData\n          }\n        });\n\n        this.setToken(res.id);\n      }\n\n      this.toggleLoading(false);\n\n      this.$router.push({ name: \"Status\" });\n    } catch (error) {\n      window.alert(error.message);\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Declaration.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Declaration.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Declaration.vue?vue&type=template&id=e5485f08&\"\nimport script from \"./Declaration.vue?vue&type=script&lang=ts&\"\nexport * from \"./Declaration.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.$route.query.rtoken)?_c('div',{staticClass:\"landing landing-container\",class:{ passed: _vm.status === true, failed: _vm.status === false }},[_vm._m(0),_c('Scanner'),(_vm.status !== null)?_c('div',{staticClass:\"landing status-icon\",class:{ passed: _vm.status === true, failed: _vm.status === false }},[(_vm.status)?_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'check']}}):_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'times']}})],1):_vm._e(),_vm._m(1),_c('p',{on:{\"click\":function($event){return _vm.$router.push({ name: 'Fill' })}}},[_vm._v(\" 我沒有 QR Code\"),_c('br'),_vm._v(\"I don't have QR Code \")])],1):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',[_vm._v(\"掃描 QR Code\"),_c('br'),_vm._v(\"以開始填寫健康聲明書\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',[_vm._v(\"Scan QR Code\"),_c('br'),_vm._v(\"to start filling the Health Declaration\")])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Watch, Vue } from \"vue-property-decorator\";\nimport { Action, Getter } from \"vuex-class\";\n\nimport { AppState } from \"@/store/types/app.type\";\nimport { FormState, FormResponse } from \"@/store/types/form.type\";\n\nimport Scanner from \"@/components/Scanner.vue\";\n\n@Component({\n  components: {\n    Scanner\n  }\n})\nexport default class Landing extends Vue {\n  @Action(\"setToken\", { namespace: \"form\" })\n  private setToken!: (token: FormState[\"token\"]) => void;\n\n  @Action(\"verifyToken\", { namespace: \"form\" })\n  private verifyToken!: (args: {\n    endpoint: AppState[\"endpoint\"];\n    token: FormState[\"token\"];\n  }) => Promise<FormResponse>;\n\n  @Action(\"resetToken\", { namespace: \"form\" })\n  private resetToken!: () => void;\n\n  @Action(\"toggleAppMode\", { namespace: \"app\" })\n  private toggleAppMode!: (status: boolean) => void;\n\n  @Getter(\"endpoint\", { namespace: \"app\" })\n  private endpoint!: string;\n\n  @Getter(\"token\", { namespace: \"form\" })\n  private token!: string;\n\n  @Watch(\"token\")\n  private async onTokenChange(token: string) {\n    if (token) {\n      this.status = null;\n\n      const res = (await this.verifyToken({\n        endpoint: this.endpoint,\n        token: token\n      })) as { fill: string; status: string };\n\n      if (!res.fill) {\n        this.$router.push({ name: \"Fill\" });\n      } else {\n        this.$router.push({ name: \"Status\" });\n      }\n    }\n  }\n\n  private mounted() {\n    this.detectRouterToken();\n  }\n\n  private status: boolean | null = null;\n\n  private resetScanner(): void {\n    setTimeout(() => {\n      this.status = null;\n      this.resetToken();\n    }, 2000);\n  }\n\n  private detectRouterToken(): void {\n    if (this.$route.query && this.$route.query.rtoken) {\n      this.toggleAppMode(true);\n      this.setToken(this.$route.query.rtoken as string);\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landing.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Landing.vue?vue&type=template&id=5b56f6f2&\"\nimport script from \"./Landing.vue?vue&type=script&lang=ts&\"\nexport * from \"./Landing.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}